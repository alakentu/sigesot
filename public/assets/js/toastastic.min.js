class Toastastic{static positions={"top-left":{top:"24px",left:"24px","flex-direction":"column"},"top-center":{top:"24px",left:"50%",transform:"translateX(-50%)","flex-direction":"column"},"top-right":{top:"24px",right:"24px","flex-direction":"column"},"center-left":{top:"50%",left:"24px",transform:"translateY(-50%)","flex-direction":"column"},"center-center":{top:"50%",left:"50%",transform:"translate(-50%, -50%)","flex-direction":"column"},"center-right":{top:"50%",right:"24px",transform:"translateY(-50%)","flex-direction":"column"},"bottom-left":{bottom:"24px",left:"24px","flex-direction":"column-reverse"},"bottom-center":{bottom:"24px",left:"50%",transform:"translateX(-50%)","flex-direction":"column-reverse"},"bottom-right":{bottom:"24px",right:"24px","flex-direction":"column-reverse"}};static icons={light:'<svg viewBox="0 0 32 32" width="1.25rem" height="1.25rem" style="overflow: visible;"><circle cx="16" cy="16" r="12" fill="#FF3B30"/><circle cx="14" cy="18" r="0" fill="#FF3B30" opacity="0"><animate attributeName="opacity" values="0; 1; 1" dur="0.35s" begin="100ms" fill="freeze" calcMode="spline" keyTimes="0; 0.6; 1" keySplines="0.25 0.71 0.4 0.88; .59 .22 .87 .63"></animate><animate attributeName="r" values="0; 17.5; 16" dur="0.35s" begin="100ms" fill="freeze" calcMode="spline" keyTimes="0; 0.6; 1" keySplines="0.25 0.71 0.4 0.88; .59 .22 .87 .63"></animate></circle><circle cx="14" cy="18" r="12" fill="#FF3B30" opacity="0"><animate attributeName="opacity" values="0.5;0" dur="0.7s" begin="350ms" fill="freeze" calcMode="spline" keyTimes="0;1" keySplines="0.0 0.0 0.2 1"></animate><animate attributeName="r" values="12;26" dur="0.7s" begin="350ms" fill="freeze" calcMode="spline" keyTimes="0;1" keySplines="0.0 0.0 0.2 1"></animate></circle><path fill="none" stroke="#ffffff" stroke-width="3" stroke-linejoin="round" d="M9 10C6.239 10 4 12.216 4 14.95c0 2.207.875 7.445 9.488 12.74a.99.99 0 0 0 1.024 0C23.126 22.395 24 17.157 24 14.95 24 12.216 21.761 10 19 10s-5 3-5 3-2.239-3-5-3" stroke-dasharray="70" stroke-dashoffset="70"><animate attributeName="stroke-dashoffset" values="70;0" dur="0.25s" begin="350ms" fill="freeze" calcMode="spline" keyTimes="0;1" keySplines="0.0, 0.0, 0.58, 1.0"></animate></path></svg>',success:'<svg viewBox="0 0 32 32" width="1.25rem" height="1.25rem" style="overflow: visible;"><circle cx="16" cy="16" r="12" fill="#34C759"/><circle cx="16" cy="16" r="0" fill="#34C759" opacity="0"><animate attributeName="opacity" values="0; 1; 1" dur="0.35s" begin="100ms" fill="freeze" calcMode="spline" keyTimes="0; 0.6; 1" keySplines="0.25 0.71 0.4 0.88; .59 .22 .87 .63"></animate><animate attributeName="r" values="0; 17.5; 16" dur="0.35s" begin="100ms" fill="freeze" calcMode="spline" keyTimes="0; 0.6; 1" keySplines="0.25 0.71 0.4 0.88; .59 .22 .87 .63"></animate></circle><circle cx="16" cy="16" r="12" fill="#34C759" opacity="0"><animate attributeName="opacity" values="1; 0" dur="1s" begin="350ms" fill="freeze" calcMode="spline" keyTimes="0;1" keySplines="0.0 0.0 0.2 1"></animate><animate attributeName="r" values="12; 26" dur="1s" begin="350ms" fill="freeze" calcMode="spline" keyTimes="0;1" keySplines="0.0 0.0 0.2 1"></animate></circle><path d="M10 16L14 20L22 12" stroke="#fff" stroke-width="4" fill="none" stroke-dasharray="22" stroke-dashoffset="22" stroke-linecap="round"><animate attributeName="stroke-dashoffset" values="22;0" dur="0.25s" begin="250ms" fill="freeze" calcMode="spline" keyTimes="0;1" keySplines="0.0, 0.0, 0.58, 1.0"></animate></path></svg>',error:'<svg viewBox="0 0 32 32" width="1.25rem" height="1.25rem" style="overflow: visible;"><circle cx="16" cy="16" r="12" fill="#FF3B30"/><circle cx="16" cy="16" r="0" fill="#FF3B30" opacity="0"><animate attributeName="opacity" values="0; 1; 1" dur="0.35s" begin="100ms" fill="freeze" calcMode="spline" keyTimes="0; 0.6; 1" keySplines="0.25 0.71 0.4 0.88; .59 .22 .87 .63"></animate><animate attributeName="r" values="0; 17.5; 16" dur="0.35s" begin="100ms" fill="freeze" calcMode="spline" keyTimes="0; 0.6; 1" keySplines="0.25 0.71 0.4 0.88; .59 .22 .87 .63"></animate></circle><circle cx="16" cy="16" r="12" fill="#FF3B30" opacity="0"><animate attributeName="opacity" values="0.5;0" dur="0.7s" begin="350ms" fill="freeze" calcMode="spline" keyTimes="0;1" keySplines="0.0 0.0 0.2 1"></animate><animate attributeName="r" values="12;26" dur="0.7s" begin="350ms" fill="freeze" calcMode="spline" keyTimes="0;1" keySplines="0.0 0.0 0.2 1"></animate></circle><path d="M12 12L20 20" stroke="#fff" stroke-width="4" fill="none" stroke-dasharray="12" stroke-dashoffset="12" stroke-linecap="round"><animate attributeName="stroke-dashoffset" values="12;0" dur="0.25s" begin="250ms" fill="freeze" calcMode="spline" keyTimes="0;1" keySplines="0.0 0.0 0.58 1.0"></animate></path><path d="M20 12L12 20" stroke="#fff" stroke-width="4" fill="none" stroke-dasharray="12" stroke-dashoffset="12" stroke-linecap="round"><animate attributeName="stroke-dashoffset" values="12;0" dur="0.25s" begin="500ms" fill="freeze" calcMode="spline" keyTimes="0;1" keySplines="0.0 0.0 0.58 1.0"></animate></path></svg>',warning:'<svg viewBox="0 0 32 32" width="1.25rem" height="1.25rem" style="overflow: visible;"><circle cx="16" cy="16" r="12" fill="#FFC107"/><circle cx="16" cy="16" r="0" fill="#FFC107" opacity="0"><animate attributeName="opacity" values="0; 1; 1" dur="0.35s" begin="100ms" fill="freeze" calcMode="spline" keyTimes="0; 0.6; 1" keySplines="0.25 0.71 0.4 0.88; .59 .22 .87 .63"></animate><animate attributeName="r" values="0; 17.5; 16" dur="0.35s" begin="100ms" fill="freeze" calcMode="spline" keyTimes="0; 0.6; 1" keySplines="0.25 0.71 0.4 0.88; .59 .22 .87 .63"></animate></circle><circle cx="16" cy="16" r="12" fill="#FFC107" opacity="0"><animate attributeName="opacity" values="0.5;0" dur="0.7s" begin="350ms" fill="freeze" calcMode="spline" keyTimes="0;1" keySplines="0.0 0.0 0.2 1"></animate><animate attributeName="r" values="12;26" dur="0.7s" begin="350ms" fill="freeze" calcMode="spline" keyTimes="0;1" keySplines="0.0 0.0 0.2 1"></animate></circle><path d="M16,7l0,9" stroke="#ffffff" stroke-width="4" fill="none" stroke-dasharray="9" stroke-dashoffset="9" stroke-linecap="round"><animate attributeName="stroke-dashoffset" values="9;0" dur="0.2s" begin="250ms" fill="freeze" calcMode="spline" keyTimes="0;1" keySplines="0.0 0.0 0.58 1.0"></animate></path><circle cx="16" cy="23" r="2.5" fill="#fff" opacity="0"><animate attributeName="opacity" values="0;1" dur="0.2s" begin="550ms" fill="freeze"></animate></circle></svg>',info:'<svg viewBox="0 0 32 32" width="1.25rem" height="1.25rem" style="overflow: visible;"><circle cx="16" cy="16" r="12" fill="#0DCAF0"/><circle cx="16" cy="16" r="0" fill="#0DCAF0" opacity="0"><animate attributeName="opacity" values="0; 1; 1" dur="0.35s" begin="100ms" fill="freeze" calcMode="spline" keyTimes="0;0.6;1" keySplines="0.25 0.71 0.4 0.88; .59 .22 .87 .63"></animate><animate attributeName="r" values="0; 17.5; 16" dur="0.35s" begin="100ms" fill="freeze" calcMode="spline" keyTimes="0;0.6;1" keySplines="0.25 0.71 0.4 0.88; .59 .22 .87 .63"></animate></circle><circle cx="16" cy="16" r="12" fill="#0DCAF0" opacity="0"><animate attributeName="opacity" values="0.5;0" dur="0.7s" begin="450ms" fill="freeze" calcMode="spline" keyTimes="0;1" keySplines="0.0 0.0 0.2 1"></animate><animate attributeName="r" values="12;26" dur="0.7s" begin="450ms" fill="freeze" calcMode="spline" keyTimes="0;1" keySplines="0.0 0.0 0.2 1"></animate></circle><circle cx="16" cy="9" r="2.5" fill="#fff" opacity="0"><animate attributeName="opacity" values="0;1" dur="0.2s" begin="250ms" fill="freeze"></animate></circle><path d="M16 16V22" stroke="#fff" stroke-width="4" fill="none" stroke-dasharray="9" stroke-dashoffset="9" stroke-linecap="round"><animate attributeName="stroke-dashoffset" values="9;0" dur="0.25s" begin="500ms" fill="freeze" calcMode="spline" keyTimes="0;1" keySplines="0.0 0.0 0.58 1.0"></animate></path></svg>',loading:'<svg viewBox="0 0 32 32" width="1.25rem" height="1.25rem" style="overflow: visible;"><circle cx="16" cy="16" r="12" fill="none" stroke="#888" stroke-width="4" stroke-dasharray="60" stroke-dashoffset="0"><animateTransform attributeName="transform" type="rotate" from="0 16 16" to="360 16 16" dur="1s" repeatCount="indefinite"/></svg>'};static defaultOptions={position:"top-right",duration:3e3,delayBetweenToasts:300,effect:"slide",autoClose:!0,pauseOnHover:!0,pauseOnWindowBlur:!0,progress:!1,closeButton:!0,iconClass:"light",type:"light",actions:[],theme:"auto",priority:"normal",showCountdown:!1,newestOnTop:!0};static instance=null;constructor(){if(Toastastic.instance)return Toastastic.instance;this.toasts=new Map,this.queue=[],this.isProcessingQueue=!1,this.setupContainers(),this.setupWindowListeners(),Toastastic.instance=this}setupContainers(){this.container=document.createElement("div"),this.container.className="toastastic-global-container",Object.keys(Toastastic.positions).forEach(e=>{const t=document.createElement("div");t.className="toastastic-position-container",t.dataset.position=e,Object.assign(t.style,{position:"fixed",display:"flex",gap:"12px",...Toastastic.positions[e]}),this.container.appendChild(t)}),document.body.appendChild(this.container)}setupWindowListeners(){window.addEventListener("blur",()=>{Toastastic.defaultOptions.pauseOnWindowBlur&&this.pauseAllToasts()}),window.addEventListener("focus",()=>{Toastastic.defaultOptions.pauseOnWindowBlur&&this.resumeAllToasts()})}pauseAllToasts(){this.toasts.forEach(e=>{e.timeout&&(clearTimeout(e.timeout),e.remainingTime=e.endTime-Date.now());const t=e.element.querySelector(".toastastic-progress");t&&(t.style.animationPlayState="paused"),e.countdownInterval&&clearInterval(e.countdownInterval)})}resumeAllToasts(){this.toasts.forEach(e=>{e.remainingTime&&(e.timeout=setTimeout(()=>e.dismiss(),e.remainingTime),e.endTime=Date.now()+e.remainingTime);const t=e.element.querySelector(".toastastic-progress");t&&(t.style.animationPlayState="running"),e.options.showCountdown&&e.remainingTime&&this.startCountdown(e)})}getPositionContainer(e){return this.container.querySelector(`[data-position="${e}"]`)}create(e){const t={...Toastastic.defaultOptions,...e},s=this.generateId();return this.queue.push({toastId:s,options:t}),this.isProcessingQueue||this.processQueue(),s}async processQueue(){for(this.isProcessingQueue=!0,this.queue.sort((e,t)=>{const s={high:1,normal:0,low:-1};return s[t.options.priority]-s[e.options.priority]||this.queue.indexOf(e)-this.queue.indexOf(t)});this.queue.length>0;){const{toastId:e,options:t}=this.queue.shift();await this.showToast(e,t),this.queue.length>0&&await new Promise(e=>setTimeout(e,t.delayBetweenToasts))}this.isProcessingQueue=!1}async showToast(e,t){const s=this.getPositionContainer(t.position);if(!s)return;const i=document.createElement("div");i.className=`toastastic ${t.type||""}`,i.dataset.id=e,i.dataset.theme=t.theme,i.dataset.effect=t.effect,i.dataset.position=t.position,i.style.transformStyle="preserve-3d";let a,o,n="";if(t.icon?(e=>{if(!e)return!1;const t=e.toString().trim();return t.startsWith("<svg")&&t.endsWith("</svg>")})(t.icon)?n=t.icon:Toastastic.icons[t.icon]?n=Toastastic.icons[t.icon]:(t.icon.includes("fa-")||t.icon.includes("bi-"))&&(n=`<i class="${t.icon}"></i>`):n=Toastastic.icons[t.type]||"",i.innerHTML=`\n      <div class="toastastic-icon">${n}</div>\n      <div class="toastastic-content">\n        ${t.title?`<div class="toastastic-title">${t.title}</div>`:""}\n        <div class="toastastic-message">${t.message}</div>\n      </div>\n      ${t.closeButton?'<button type="button" class="toastastic-close">&times;</button>':""}\n      ${t.progress?'<div class="toastastic-progress"></div>':""}\n      ${t.showCountdown?'<div class="toastastic-countdown"></div>':""}\n    `,t.actions?.length>0){const s=document.createElement("div");s.className="toastastic-actions",t.actions.forEach(t=>{const i=document.createElement("button");i.textContent=t.label,i.className=t.class||"toastastic-action-btn",t.class||(i.style.cssText="\n            background: var(--toast-action-bg, #4caf50);\n            color: var(--toast-action-color, #ffffff);\n            border: none;\n            padding: 4px 12px;\n            border-radius: 4px;\n            font-size: 13px;\n            cursor: pointer;\n            margin: 2px;\n          "),i.addEventListener("click",s=>{s.stopPropagation(),t.handler(e),!1!==t.closeOnClick&&this.dismiss(e)}),s.appendChild(i)}),i.querySelector(".toastastic-content").appendChild(s)}t.newestOnTop&&s.firstChild?s.insertBefore(i,s.firstChild):s.appendChild(i),this.applyEffect(i,t.effect,t.position,"enter"),i.classList.add("toastastic-entering"),setTimeout(()=>{i.classList.replace("toastastic-entering","toastastic-visible")},10);let r=Date.now()+t.duration,l=t.duration;const c=()=>{if(this.toasts.has(e)){const t=this.toasts.get(e);t.element.style.animation="none",requestAnimationFrame(()=>{this.applyEffect(t.element,t.element.dataset.effect,t.element.dataset.position,"exit"),t.element.classList.replace("toastastic-visible","toastastic-exiting"),setTimeout(()=>{t.element.remove(),this.toasts.delete(e)},300)})}},m=()=>{t.autoClose&&t.duration>0&&(a=setTimeout(c,l),r=Date.now()+l)},u=()=>{if(t.showCountdown&&t.duration>0){const e=i.querySelector(".toastastic-countdown");let t=Math.ceil(l/1e3);e.textContent=`${t}s`,o=setInterval(()=>{t--,e.textContent=`${t}s`,t<=0&&clearInterval(o)},1e3)}};if(t.progress&&t.duration){const e=i.querySelector(".toastastic-progress");e&&(e.style.animationDuration=`${l}ms`)}m(),u(),t.closeButton&&i.querySelector(".toastastic-close")?.addEventListener("click",e=>{e.stopPropagation(),c()}),i.addEventListener("mouseenter",()=>{if(t.pauseOnHover){clearTimeout(a),o&&clearInterval(o),l=r-Date.now();const e=i.querySelector(".toastastic-progress");e&&(e.style.animationPlayState="paused")}}),i.addEventListener("mouseleave",()=>{if(t.pauseOnHover&&l>0){m(),u();const e=i.querySelector(".toastastic-progress");e&&(e.style.animationPlayState="running")}}),this.toasts.set(e,{element:i,dismiss:c,timeout:a,countdownInterval:o,endTime:r,remainingTime:l,options:t})}static promise(e,t){const s=Toastastic.custom({...t.loadingOptions,message:t.loading,type:"info",icon:"loading",duration:999999});return e.then(e=>(Toastastic.dismiss(s),Toastastic.success(t.success,{duration:t.successDuration||3e3}),e)).catch(e=>{throw Toastastic.dismiss(s),Toastastic.error(t.error,{duration:t.errorDuration||3e3}),e}),e}applyEffect(e,t,s,i="enter"){e.style.animation="none",requestAnimationFrame(()=>{let a;const[o,n]=s.split("-");switch(t){case"zoom":a="enter"===i?"toastastic-zoom-in":"toastastic-zoom-out";break;case"fade":a="enter"===i?"toastastic-fade-in":"toastastic-fade-out";break;default:a="enter"===i?"top"===o?"toastastic-slide-in-top":"bottom"===o?"toastastic-slide-in-bottom":"left"===n?"toastastic-slide-in-left":"right"===n?"toastastic-slide-in-right":"toastastic-slide-in-top":"top"===o?"toastastic-slide-out-top":"bottom"===o?"toastastic-slide-out-bottom":"left"===n?"toastastic-slide-out-left":"right"===n?"toastastic-slide-out-right":"toastastic-slide-out-top"}e.style.animation=`${a} 0.4s ${"slide"===t?"cubic-bezier(0.215, 0.61, 0.355, 1)":"ease-out"} forwards`})}dismiss(e){const t=this.toasts.get(e);t&&t.dismiss()}generateId(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}static light(e,t={}){return(new Toastastic).create({...t,message:e,type:"light"})}static success(e,t={}){return(new Toastastic).create({...t,message:e,type:"success"})}static error(e,t={}){return(new Toastastic).create({...t,message:e,type:"error"})}static warning(e,t={}){return(new Toastastic).create({...t,message:e,type:"warning"})}static info(e,t={}){return(new Toastastic).create({...t,message:e,type:"info"})}static custom(e){return(new Toastastic).create(e)}static dismiss(e){(new Toastastic).dismiss(e)}}window.Toastastic=Toastastic;